<div class="container-fluid">
  <div class="row flex-xl-nowrap mt-3" *ngIf="data">
    <div class="col-12 col-lg-9" style="border-right: 1px solid rgba(0, 0, 0, 0.1)">
      <table class="table">
        <thead class="bg-light">
          <tr>
            <ng-container *ngFor="let item of data.headers; let idx = index">
              <ng-container *ngIf="idx == 0; else otherHeader">
                <th>
                  {{item}}
                </th>
                <th>
                </th>
              </ng-container>
              <ng-template #otherHeader>
                <th>
                  {{item}}
                </th>
              </ng-template>
            </ng-container>
          </tr>
        </thead>

        <tbody>
          <ng-container *ngFor="let row of data.rows;">
            <ng-container *ngIf="row.length == 1; else otherRow">
              <tr class="bg-light">
                <td colspan="7">
                  {{row[0]}}
                </td>
              </tr>
            </ng-container>
            <ng-template #otherRow>
              <tr [ngbPopover]="popContent" triggers="manual" (mouseenter)="showColumnCharts(p1, row)" (mouseleave)="closeColumnCharts(p1)"
                #p1="ngbPopover" placement="right">
                <!-- <td colspan="2">
                  <div>
                    <span>{{row[0]}} ({{row[1]}}</span>
                  </div>
                </td> -->
                <ng-container *ngFor="let item of row; let idx = index">
                  <!-- <ng-container *ngIf="idx >=2"> -->
                    <td>{{item}}</td>
                  <!-- </ng-container> -->
                </ng-container>
              </tr>
            </ng-template>
          </ng-container>
        </tbody>
      </table>
    </div>
    <div class="col-12 col-lg-3">
      <ng-template #popContent let-greeting="greeting">
        <canvas baseChart [datasets]="barChartData" [labels]="barChartLabels" [options]="barChartOptions" [legend]="barChartLegend"
          [colors]="barChartColors" [chartType]="barChartType" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)"></canvas>
      </ng-template>
    </div>
  </div>
</div>